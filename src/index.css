
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Material Design 3 Light Theme Colors */
    --background: 254 254 254;
    --foreground: 16 16 16;
    
    --surface: 254 254 254;
    --surface-dim: 231 231 231;
    --surface-bright: 254 254 254;
    --surface-container-lowest: 255 255 255;
    --surface-container-low: 247 247 247;
    --surface-container: 241 241 241;
    --surface-container-high: 236 236 236;
    --surface-container-highest: 230 230 230;
    
    --on-surface: 16 16 16;
    --on-surface-variant: 68 68 68;
    
    --primary: 103 80 164;
    --primary-container: 234 221 255;
    --on-primary: 255 255 255;
    --on-primary-container: 33 0 93;
    
    --secondary: 98 91 113;
    --secondary-container: 231 222 248;
    --on-secondary: 255 255 255;
    --on-secondary-container: 30 25 43;
    
    --tertiary: 125 82 96;
    --tertiary-container: 255 216 228;
    --on-tertiary: 255 255 255;
    --on-tertiary-container: 55 11 30;
    
    --error: 186 26 26;
    --error-container: 255 218 214;
    --on-error: 255 255 255;
    --on-error-container: 65 0 2;
    
    --outline: 121 116 126;
    --outline-variant: 204 204 204;
    
    /* Legacy compatibility */
    --card: var(--surface-container);
    --card-foreground: var(--on-surface);
    --popover: var(--surface-container);
    --popover-foreground: var(--on-surface);
    --muted: var(--surface-container-high);
    --muted-foreground: var(--on-surface-variant);
    --accent: var(--secondary-container);
    --accent-foreground: var(--on-secondary-container);
    --destructive: var(--error);
    --destructive-foreground: var(--on-error);
    --border: var(--outline-variant);
    --input: var(--outline-variant);
    --ring: var(--primary);
    --radius: 1.25rem;

    /* Sidebar colors */
    --sidebar-background: var(--surface-container);
    --sidebar-foreground: var(--on-surface);
    --sidebar-primary: var(--primary);
    --sidebar-primary-foreground: var(--on-primary);
    --sidebar-accent: var(--secondary-container);
    --sidebar-accent-foreground: var(--on-secondary-container);
    --sidebar-border: var(--outline-variant);
    --sidebar-ring: var(--primary);
  }

  .dark {
    /* Material Design 3 Dark Theme Colors */
    --background: 16 16 20;
    --foreground: 230 225 229;
    
    --surface: 16 16 20;
    --surface-dim: 16 16 20;
    --surface-bright: 59 56 62;
    --surface-container-lowest: 10 10 13;
    --surface-container-low: 22 22 26;
    --surface-container: 30 29 32;
    --surface-container-high: 40 39 43;
    --surface-container-highest: 49 48 51;
    
    --on-surface: 230 225 229;
    --on-surface-variant: 196 199 197;
    
    --primary: 208 188 255;
    --primary-container: 79 55 139;
    --on-primary: 56 30 114;
    --on-primary-container: 234 221 255;
    
    --secondary: 203 194 220;
    --secondary-container: 74 68 88;
    --on-secondary: 51 45 65;
    --on-secondary-container: 231 222 248;
    
    --tertiary: 227 187 200;
    --tertiary-container: 99 59 72;
    --on-tertiary: 80 37 50;
    --on-tertiary-container: 255 216 228;
    
    --error: 255 180 171;
    --error-container: 147 0 10;
    --on-error: 105 0 5;
    --on-error-container: 255 218 214;
    
    --outline: 147 143 153;
    --outline-variant: 68 71 78;
    
    /* Legacy compatibility */
    --card: var(--surface-container);
    --card-foreground: var(--on-surface);
    --popover: var(--surface-container);
    --popover-foreground: var(--on-surface);
    --muted: var(--surface-container-high);
    --muted-foreground: var(--on-surface-variant);
    --accent: var(--secondary-container);
    --accent-foreground: var(--on-secondary-container);
    --destructive: var(--error);
    --destructive-foreground: var(--on-error);
    --border: var(--outline-variant);
    --input: var(--outline-variant);
    --ring: var(--primary);

    /* Sidebar colors */
    --sidebar-background: var(--surface-container);
    --sidebar-foreground: var(--on-surface);
    --sidebar-primary: var(--primary);
    --sidebar-primary-foreground: var(--on-primary);
    --sidebar-accent: var(--secondary-container);
    --sidebar-accent-foreground: var(--on-secondary-container);
    --sidebar-border: var(--outline-variant);
    --sidebar-ring: var(--primary);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html, body, #root {
    @apply h-full w-full m-0 p-0 overflow-x-hidden;
    -webkit-overflow-scrolling: touch;
    -webkit-text-size-adjust: 100%;
    -webkit-tap-highlight-color: transparent;
  }

  body {
    @apply bg-background text-foreground antialiased;
    text-rendering: optimizeLegibility;
    font-size: 16px;
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  input, select, textarea {
    font-size: 16px !important;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border-radius: 0;
    background-clip: padding-box;
  }
  
  button {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border-radius: 0;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
}

/* Enhanced Material Design 3 Utilities */
@layer utilities {
  /* Material Design 3 Elevation System */
  .elevation-0 { box-shadow: none; }
  .elevation-1 { box-shadow: 0 1px 2px 0 rgba(0,0,0,.3), 0 1px 3px 1px rgba(0,0,0,.15); }
  .elevation-2 { box-shadow: 0 1px 2px 0 rgba(0,0,0,.3), 0 2px 6px 2px rgba(0,0,0,.15); }
  .elevation-3 { box-shadow: 0 1px 3px 0 rgba(0,0,0,.3), 0 4px 8px 3px rgba(0,0,0,.15); }
  .elevation-4 { box-shadow: 0 2px 3px 0 rgba(0,0,0,.3), 0 6px 10px 4px rgba(0,0,0,.15); }
  .elevation-5 { box-shadow: 0 4px 4px 0 rgba(0,0,0,.3), 0 8px 12px 6px rgba(0,0,0,.15); }

  /* Enhanced transitions */
  .material-transition { @apply transition-all duration-300 ease-out; }
  .material-transition-fast { @apply transition-all duration-200 ease-out; }
  .material-transition-slow { @apply transition-all duration-500 ease-out; }

  /* Enhanced iOS Safe Area Support */
  .ios-safe-top { padding-top: env(safe-area-inset-top); }
  .ios-safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
  .ios-safe-left { padding-left: env(safe-area-inset-left); }
  .ios-safe-right { padding-right: env(safe-area-inset-right); }
  
  .ios-touch-target {
    min-height: 48px;
    min-width: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ios-vh-fix {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
  
  .ios-no-bounce {
    overscroll-behavior-y: none;
  }
  
  .ios-smooth-scroll {
    -webkit-overflow-scrolling: touch;
  }
}

/* iOS specific improvements */
@supports (-webkit-touch-callout: none) {
  .ios-vh-fix {
    height: -webkit-fill-available;
  }
  input, select, textarea {
    font-size: 16px !important;
  }
}

@media screen and (max-width: 640px) {
  .bottom-nav-ios {
    padding-bottom: max(env(safe-area-inset-bottom), 0.75rem);
  }
}
